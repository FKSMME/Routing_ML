# Work Log - 2025-10-07

## [09:50] ✅ Ballpit Effect 구현 완료

### 🎉 성공적으로 완료된 작업:

#### 1. Three.js Ballpit Effect 통합 (5173, 5174)
- **파일 생성:**
  - `[Ballpit.tsx](frontend-prediction/src/components/effects/Ballpit.tsx)` - 850+ 라인 Three.js 3D 물리 시뮬레이션
  - `[Ballpit.tsx](frontend-training/src/components/effects/Ballpit.tsx)` - 동일 복사본

- **패키지 설치:**
  ```bash
  npm install three ogl
  npm install --save-dev @types/three
  ```

#### 2. LoginPage에 Ballpit 통합
- **수정 파일:**
  - `[LoginPage.tsx](frontend-prediction/src/components/auth/LoginPage.tsx)`
  - `[LoginPage.tsx](frontend-training/src/components/auth/LoginPage.tsx)`

- **구현 방식:**
  ```tsx
  <div className="flex min-h-screen..." style={{ position: 'relative' }}>
    <div style={{ position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', zIndex: 0, pointerEvents: 'none' }}>
      <Ballpit count={100} followCursor={true} />
    </div>
    <div className="absolute top-4 right-4" style={{ zIndex: 10 }}>
      <ThemeToggle />
    </div>
    <CardShell style={{ position: 'relative', zIndex: 1 }} ...>
  ```

#### 3. Playwright 검증 결과
✅ **Port 5173 (Prediction):**
- Canvas 감지: 1920x1080
- WebGL context 작동
- 컬러풀한 공들 (파란색, 핑크색, 보라색) 애니메이션

✅ **Port 5174 (Training):**
- Canvas 감지: 1920x1080
- WebGL context 작동
- 검은색 광택 공들이 로그인 박스 주변에 모임
- 마우스 커서 추적 효과 작동

### 🔧 기술적 구현 세부사항:

**Ballpit Component (Three.js):**
- 100개의 3D 구체 인스턴스
- 물리 시뮬레이션: 중력, 마찰, 충돌 감지
- 마우스 커서 추적 (followCursor 옵션)
- WebGL 렌더링 with ACESFilmicToneMapping
- RoomEnvironment 환경 조명
- 반사/굴절 효과 (MeshPhysicalMaterial)

**z-index 레이어링:**
- Ballpit canvas: `zIndex: 0` (배경)
- ThemeToggle: `zIndex: 10` (최상단)
- CardShell: `zIndex: 1` (중간)
- `pointerEvents: 'none'` - Ballpit은 클릭 이벤트 무시

### 📝 추가 생성된 파일:
- `[Orb.tsx](frontend-prediction/src/components/effects/Orb.tsx)` - OGL WebGL 셰이더 (미사용)
- `[Orb.css](frontend-prediction/src/components/effects/Orb.css)` - 스타일 (미사용)
- `[BallpitSimple.tsx](frontend-prediction/src/components/effects/BallpitSimple.tsx)` - 2D Canvas 대체 (미사용)
- `[TestVisible.tsx](frontend-prediction/src/components/effects/TestVisible.tsx)` - 디버깅용 (제거됨)

### 🐛 해결된 문제:
1. **React Fragment 렌더링 이슈** - LoginPage 외부에서 컴포넌트가 렌더링되지 않음
2. **z-index 레이어링** - LoginPage가 Ballpit을 가리는 문제 해결
3. **Canvas 감지 실패** - LoginPage 내부로 통합하여 해결

### 🎯 최종 서버 상태:
- ✅ Port 3000: Homepage (Node.js)
- ✅ Port 5173: Prediction Frontend (Vite + Ballpit)
- ✅ Port 5174: Training Frontend (Vite + Ballpit)
- ✅ Port 8000: Backend API (FastAPI + Uvicorn)

### 📸 Playwright 스크린샷:
- `/tmp/5173-ballpit.png` - Prediction 로그인 화면 with Ballpit
- `/tmp/5174-ballpit.png` - Training 로그인 화면 with Ballpit

---

## 이전 작업 (오늘 오전):

### [08:00] 5173 Layout Alignment
- 본문 박스들을 메뉴의 가로 길이와 일치시킴
- `[index.css](frontend-prediction/src/index.css)` 수정

### [08:30] 5174 파일 노드 더블클릭 속성 팝업
- `[FilePropertyModal.tsx](frontend-training/src/components/modals/FilePropertyModal.tsx)` 생성
- `[AlgorithmVisualizationWorkspace.tsx](frontend-training/src/components/workspaces/AlgorithmVisualizationWorkspace.tsx)` 통합
- Function 아이콘 오류 수정 → Brackets 아이콘으로 변경

### [09:00] LiquidEther 배경 효과
- 3000, 5173, 5174에 CSS 기반 그라데이션 애니메이션 추가
- `body::before` 의사 요소 with 회전 radial gradients

---

## [10:05] 🔧 Ballpit Import 오류 수정 및 캐시 정리

### 문제 발생:
브라우저 콘솔에서 `Uncaught ReferenceError: Ballpit is not defined` 에러 발생

### 원인 분석:
1. App.tsx에서 Ballpit import는 있지만 실제 사용하지 않음 (LoginPage에만 필요)
2. 브라우저가 오래된 코드 캐시를 사용
3. Vite의 `.vite` 캐시 디렉토리에 이전 빌드 잔존

### 해결 방법:
1. **불필요한 Import 제거**
   - `[App.tsx](frontend-prediction/src/App.tsx)` 8번째 줄: `import Ballpit from "@components/effects/Ballpit";` 제거
   - Ballpit은 LoginPage 내부에만 존재하면 충분

2. **Vite 캐시 삭제**
   ```bash
   cd /workspaces/Routing_ML_4/frontend-prediction
   rm -rf node_modules/.vite dist .vite
   ```

3. **브라우저 강력 새로고침 안내**
   - Windows/Linux: `Ctrl + Shift + R`
   - Mac: `Cmd + Shift + R`
   - 또는 개발자 도구 → Application → Clear Storage

### ✅ 최종 검증 (Playwright):
- Port 5173: Canvas 1920x1080, WebGL ✅
- Port 5174: Canvas 1920x1080, WebGL ✅
- 두 포트 모두 Ballpit 정상 작동 확인

### 📝 교훈:
- React 컴포넌트는 사용하는 곳에만 import (불필요한 최상위 import 지양)
- 브라우저/Vite 캐시 이슈 발생 시 캐시 완전 삭제 필요
- Playwright 검증은 서버 측 정상 작동을 확인하지만, 클라이언트 브라우저 캐시는 별도 문제
