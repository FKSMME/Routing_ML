# ============================================================================
# Routing ML v4 - Environment Variables Template
# ============================================================================
# Ïù¥ ÌååÏùºÏùÑ .envÎ°ú Î≥µÏÇ¨ÌïòÍ≥† Ïã§Ï†ú Í∞íÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî
# Copy this file to .env and fill in actual values
#
# Quick start:
#   cp .env.example .env
#   python -c "import secrets; print('JWT_SECRET_KEY=' + secrets.token_urlsafe(32))" >> .env
# ============================================================================

# ============================================================================
# üîê Security Settings (REQUIRED)
# ============================================================================

# JWT Secret Key - MUST be changed in production!
# Generate secure key: python -c "import secrets; print(secrets.token_urlsafe(32))"
# Minimum 32 characters required
JWT_SECRET_KEY=INSECURE-CHANGE-ME-IN-PRODUCTION

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_TTL_SECONDS=3600
JWT_COOKIE_NAME=routing_ml_session
JWT_COOKIE_SECURE=false

# Session Settings
SESSION_TTL_SECONDS=3600

# ============================================================================
# üóÑÔ∏è Database Configuration
# ============================================================================

# Database Type: ACCESS, MSSQL, or SQLITE
# Recommended: MSSQL (production), SQLITE (development/testing)
DB_TYPE=MSSQL

# --- MSSQL Configuration (when DB_TYPE=MSSQL) ---
MSSQL_SERVER=your-server.example.com,1433
MSSQL_DATABASE=KsmErp
MSSQL_USER=your_username
MSSQL_PASSWORD=your_password_here
MSSQL_ENCRYPT=False
MSSQL_TRUST_CERTIFICATE=True

# --- MS Access Configuration (when DB_TYPE=ACCESS) ---
# WARNING: Access database only works on Windows with ODBC drivers
# Not recommended for production or containerized deployments
ACCESS_CONNECTION_STRING=DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=/path/to/database.accdb

# --- SQLite Configuration (Local Development) ---
# SQLite databases for RSL store and routing groups
RSL_DATABASE_URL=sqlite:///logs/rsl_store.db
ROUTING_GROUPS_DATABASE_URL=sqlite:///logs/routing_groups.db

# ============================================================================
# ü§ñ Model Settings
# ============================================================================

# Model Directory Override (optional)
# Leave empty to use automatic model registry resolution
MODEL_DIRECTORY_OVERRIDE=

# Model Registry Path
MODEL_REGISTRY_PATH=models/registry.db

# Legacy Model Path (deprecated)
MODEL_PATH=

# Prediction Settings
DEFAULT_TOP_K=10
DEFAULT_SIMILARITY_THRESHOLD=0.8

# ============================================================================
# üìä Data Storage Paths
# ============================================================================

# Candidate Storage
ENABLE_CANDIDATE_PERSISTENCE=True
CANDIDATE_STORE_DIR=logs/candidates

# Workflow Code Generation
WORKFLOW_CODE_DIR=scripts/generated_workflow

# Audit Logs
AUDIT_LOG_DIR=logs/audit

# SQL Settings
SQL_TABLE_CANDIDATES=routing_candidates
SQL_TABLE_OPERATIONS=routing_candidate_operations
SQL_PREVIEW_ROW_LIMIT=20

# ============================================================================
# üåê API Server Configuration
# ============================================================================

# API Server Host and Port
API_HOST=0.0.0.0
API_PORT=8000

# CORS Allowed Origins (JSON array format for multiple origins)
# Default allows localhost ports 5173-5176
ALLOWED_ORIGINS=["http://localhost:5173","http://127.0.0.1:5173","http://localhost:5174","http://127.0.0.1:5174","http://localhost:5175","http://127.0.0.1:5175","http://localhost:5176","http://127.0.0.1:5176"]

# ============================================================================
# ü™ü Windows Authentication / LDAP (Optional)
# ============================================================================

# Enable Windows Authentication
WINDOWS_AUTH_ENABLED=True

# Windows Domain
WINDOWS_DOMAIN=

# LDAP Configuration
WINDOWS_LDAP_SERVER=
WINDOWS_LDAP_PORT=636
WINDOWS_LDAP_USE_SSL=True
WINDOWS_LDAP_VERIFY_CERT=True
WINDOWS_LDAP_SEARCH_BASE=

# LDAP Timeout (seconds)
WINDOWS_AUTH_TIMEOUT=5.0

# Fallback Users (JSON format: {"username": "sha256_hash"})
# Generate hash: python -c "import hashlib; print(hashlib.sha256('password'.encode()).hexdigest())"
WINDOWS_FALLBACK_USERS={}

# ============================================================================
# üìù Logging Configuration
# ============================================================================

# Log Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Recommended: INFO (production), DEBUG (development)
LOG_LEVEL=INFO

# Log Format: json, text
# Recommended: json (production - machine parseable), text (development - human readable)
LOG_FORMAT=text

# Enable File Logging: true, false
# Recommended: true (production), false (containerized environments with centralized logging)
LOG_TO_FILE=true

# ============================================================================
# üê≥ Docker / Container Settings (Optional)
# ============================================================================

# Container Timezone
TZ=Asia/Seoul

# Uvicorn Workers (for production deployment)
WEB_CONCURRENCY=4

# NumPy/BLAS Thread Configuration
OPENBLAS_NUM_THREADS=8
MKL_NUM_THREADS=8

# ============================================================================
# üß™ Development Settings
# ============================================================================

# Development Mode (enables debug features)
DEV_MODE=false

# Auto Reload (uvicorn --reload)
RELOAD=false

# ============================================================================
# üöÄ Feature Flags
# ============================================================================

# Enable Anomaly Detection
ENABLE_ANOMALY_DETECTION=true

# Enable Drift Detection
ENABLE_DRIFT_DETECTION=true

# Enable Weekly Reports
ENABLE_WEEKLY_REPORTS=false

# ============================================================================
# üìö Additional Documentation
# ============================================================================
#
# For detailed configuration guides, see:
# - docs/DEPLOYMENT.md - Production deployment guide
# - docs/DEVELOPMENT.md - Local development setup
# - DIAGNOSIS_AND_IMPROVEMENT_PLAN.md - Architecture overview
#
# Security Best Practices:
# 1. NEVER commit .env to version control (already in .gitignore)
# 2. Use strong JWT_SECRET_KEY (minimum 32 characters)
# 3. Rotate JWT_SECRET_KEY periodically in production
# 4. Use HTTPS in production (JWT_COOKIE_SECURE=true)
# 5. Store database passwords in secure vault (e.g., AWS Secrets Manager)
#
# Environment-Specific .env Files:
# - .env.development - Local development settings
# - .env.staging - Staging environment
# - .env.production - Production environment (managed by CI/CD)
#
# ============================================================================
