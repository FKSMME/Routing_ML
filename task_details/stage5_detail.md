# 절대 지령
1. 각 단계는 승인 후에만 진행한다.
2. 단계 착수 전 이번 단계 전체 범위를 리뷰하고 오류를 식별한다.
3. 오류 발견 시 수정 전에 승인 재요청한다.
4. 이전 단계 오류가 없음을 재확인한 뒤 다음 단계 승인을 요청한다.
5. 모든 단계 작업은 백그라운드 방식으로 수행한다.
6. 문서/웹뷰어 점검이 필요한 경우 반드시 승인 확인 후 진행한다.
7. 다음 단계 착수 전에 이전 단계 전반을 재점검하여 미해결 오류가 없는지 확인한다.

## 5단계 상세 태스크: 출력/SQL 규격

### Gate Review Checklist
- [ ] 절대 지령 1~7 준수 여부 재확인
- [ ] 출력 스키마 요구사항 리뷰 및 관련 문서 점검
- [ ] 선행 단계(예측 서비스) 결과물과 인터페이스 일치 확인
- [ ] DB 뷰어/DDL 도구 접근 전 승인 상태 확인
- [ ] 백그라운드 마이그레이션/DDL 실행 계획 수립

### 설계(Design)
1. `routing_candidates`, `routing_candidate_operations` 스키마 상세 정의(컬럼/타입/키)
2. FK, 인덱스, 제약 조건 요구사항 문서화
3. CSV/INSERT 출력 포맷 명세서 작성(컬럼 순서, 구분자, 널 처리)
4. 데이터 정합성 규칙 정의(중복, NULL, 타입 범위)

### 구현(Implementation)
1. DDL 스크립트 초안 작성 (테이블 생성, 인덱스, 코멘트)
2. 마이그레이션 툴 선택 및 스크립트 구조 설계
3. 저장/내보내기 로직 설계: 트랜잭션, 에러 핸들링, 로깅 포함
4. 샘플 데이터 매핑 스크립트 초안 작성(예측 결과 → SQL 포맷)

### 테스트(Test)
1. 샘플 표 대비 컬럼/타입/널 제약 검증 시나리오 작성
2. DDL 적용/롤백 테스트 계획 수립(백그라운드 환경 가정)
3. 저장/내보내기 기능 단위 테스트 케이스 정의(성공/에러/재시도)
4. 데이터 검증 리포트 서식 초안 작성

### 배포(Deployment)
1. 마이그레이션 실행 계획(순서, 백업 전략, 검증 절차) 문서화
2. 운영 DB 반영 전 승인 플로우 정의 및 일정 조율
3. 출력 포맷 변경 시 버전 관리 정책 수립
4. 단계 완료 보고서 및 다음 단계 승인 요청 자료 정리
