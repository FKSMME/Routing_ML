#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Pre-commit Hook: TypeScript íƒ€ì… ì²´í¬ ì¤‘..."

# Prediction Frontend íƒ€ì… ì²´í¬
if git diff --cached --name-only | grep -q "^frontend-prediction/"; then
  echo "ğŸ“¦ Prediction Frontend ë³€ê²½ ê°ì§€, íƒ€ì… ì²´í¬ ì‹¤í–‰..."
  cd frontend-prediction
  npx tsc --noEmit
  if [ $? -ne 0 ]; then
    echo "âŒ Prediction Frontend TypeScript ì—ëŸ¬ ë°œê²¬!"
    echo "ìˆ˜ì • í›„ ë‹¤ì‹œ ì»¤ë°‹í•´ì£¼ì„¸ìš”."
    exit 1
  fi
  echo "âœ… Prediction Frontend íƒ€ì… ì²´í¬ í†µê³¼"
  cd ..
fi

# Training Frontend íƒ€ì… ì²´í¬
if git diff --cached --name-only | grep -q "^frontend-training/"; then
  echo "ğŸ“¦ Training Frontend ë³€ê²½ ê°ì§€, íƒ€ì… ì²´í¬ ì‹¤í–‰..."
  cd frontend-training
  npx tsc --noEmit
  if [ $? -ne 0 ]; then
    echo "âŒ Training Frontend TypeScript ì—ëŸ¬ ë°œê²¬!"
    echo "ìˆ˜ì • í›„ ë‹¤ì‹œ ì»¤ë°‹í•´ì£¼ì„¸ìš”."
    exit 1
  fi
  echo "âœ… Training Frontend íƒ€ì… ì²´í¬ í†µê³¼"
  cd ..
fi

echo "âœ… Pre-commit Hook ì™„ë£Œ!"
